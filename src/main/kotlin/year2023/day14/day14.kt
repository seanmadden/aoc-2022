package year2023.day14

import java.util.Deque
import java.util.Queue

val testInput = """
    #.##..##.
    ..#.##.#.
    ##......#
    ##......#
    ..#.##.#.
    ..##..##.
    #.#.##.#.

    #...##..#
    #....#..#
    ..##..###
    #####.##.
    #####.##.
    ..##..###
    #....#..#
""".trimIndent()

val puzzleInput = """
    ##...######...##.
    ......#..#.......
    ##.##########.###
    ###..........###.
    ...#..#..#..#...#
    ##..###..###..###
    ..##.#.##.#.##..#
    ..####.##.####..#
    ####........####.
    ..#.##.##.##.#..#
    ##.###.##.###.###
    ###.#......#.####
    ......####......#
    #..#.##..##.#..##
    ..#.########.#...
    ##...######...##.
    ..#.##....##.#..#

    ...##......#.
    ...#.......#.
    #......##.###
    .##########.#
    #####.###.##.
    ###.####.##..
    ###.####.##..
    #####.###.##.
    .##########.#

    #.##..#
    ##.#.#.
    ##.#.##
    #.##..#
    ...####
    #.#..#.
    #.#..#.

    .##.#..
    .##.###
    ..#####
    #..####
    .####..
    .#...##
    ##...##

    #.#.....#.##.##.#
    #.#.....#.##.##.#
    .....#...#####...
    ...#.###....#...#
    .###..####.#..#.#
    #.###.#.#..###..#
    ..####...##.#.##.
    ..####...##.#.##.
    #.#.#.#.#..###..#
    .###..####.#..#.#
    ...#.###....#...#
    .....#...#####...
    #.#.....#.##.##.#

    ###.####.#..#
    #...##.##..#.
    .#.##.#.###.#
    .#..#.#.###.#
    #.#...##.#.##
    ##.#..##.#..#
    ##.#...#.#..#
    #.#...##.#.##
    .#..#.#.###.#
    .#.##.#.###.#
    #...##.##..#.
    ###.####.#..#
    #..#..#..#.##
    .#...#.#..#.#
    .#...#.#..#.#
    #..#..#..#.##
    ###.####.#..#

    .#.#..#..
    ..#.##.#.
    ..#.##.#.
    ##.#..#..
    .#.#.#.##
    ...#...##
    ...#...##

    .#......#..##.###
    .###..###.##.####
    .##....##.#####.#
    #.######.##...##.
    ##.#..#.##.###..#
    #...##...#.#.###.
    ..##..##.........
    #..####.###....#.
    .#.####.#.#####..
    .##....##.##..##.
    ###.##.####....##
    #..#..#..#..##...
    #..####..#####...
    #..####..#####...
    #..#..#..#..##...

    ...#....#
    ###.####.
    ###....#.
    .#..####.
    ..##.##.#
    #####..##
    #..######
    #####..##
    .###.##.#
    ..##....#
    ..##....#
    ..##....#
    ..##....#
    .###.##.#
    #####..##

    #.##...##.#
    ##..#####..
    ##..##.#.#.
    .####......
    #.##.###...
    ..##....###
    ##..####...
    ##..####...
    ..##....###
    #.##.###...
    .####......
    ##..##.#.#.
    ##..#####..

    ..###...#
    ..###...#
    .#..##.##
    .###....#
    ...####.#
    ..###.#.#
    #.#..#.#.
    #.#..#.#.
    ..###.###
    ...####.#
    .###....#
    .#..##.##
    ..###...#

    ...#..#.###....
    #.#....#..#....
    ..##......##.#.
    ##.#.####.#.###
    ##..##.#..###.#
    #######...##..#
    ..#.#...###.#..
    ..#####..######
    ###.##..#..####
    ##.######..#...
    ##.######..#...
    ###.##..#..####
    ..#####..######
    ..#.#...###.#..
    #######...##..#

    #.##.##
    #.##.##
    ..###.#
    ..###.#
    ..####.
    ......#
    .....#.
    .#..##.
    .#..##.
    .....#.
    ......#
    ..####.
    ..###.#
    ..###.#
    #.#####

    ##..#..#.
    ..###..##
    ###.###..
    ###......
    ....#..#.
    ...#.##.#
    .....##..
    ##...##..
    ##.#....#

    .#..#.##..##.#..#
    #.#...##..##...#.
    #.#...##..##...#.
    .#..#.##..##.#..#
    .###....##....###
    ###..#..##..#..##
    #.#...######...#.
    ...##...##..###..
    #...#.######.#...

    ..#..#....#.###
    #.####....#..##
    ###..###..#....
    .#.##.#....##..
    #......#...##..
    .#.##.#..###.##
    ..#..#..#.#.#..
    .######.#.#..##
    ###..####..####
    ##.##.###......
    ...##...###....

    ###..###..#####..
    .#...#.....##....
    .##............#.
    ####...#.####....
    #....#.#.##.#..#.
    ##....#.#.#..#..#
    #.#.###..#..#..##
    #.#.###.##..#..##
    ##....#.#.#..#..#
    ##....#.#.#..#..#
    #.#.###.##..#..##
    #.#.###..#..#..##
    ##....#.#.#..#..#

    ##..#..#.#.##.#
    ##.#.#.#...####
    ####..##...#.#.
    ..##.#....#.#..
    ..##.#....#.#..
    ###...##...#.#.
    ##.#.#.#...####
    ##..#..#.#.##.#
    #######.###...#

    ....#.##..#..#.
    #..###.....##..
    #..#.###.##..##
    #######.##.##.#
    .##..#....####.
    ....##..#......
    ####..#.#.#..#.
    ..#.####.##..##
    .##...##.#.##.#
    ....#..#.##..##
    .....#..#.####.
    .##..##....##..
    ....#.##...##..

    ##....#....##
    .....###.####
    .####....##.#
    .####....##.#
    .....###.####
    ##....#....##
    .....#.###...
    ###.#.#...###
    ###.#.#...###
    .....#.###...
    ##....#.....#

    ############.##
    #..######..#.##
    #...####...####
    ...######......
    #.###..###.#.##
    #..##..##..####
    .###....###.###
    #.#......#.#.##
    ..########..##.

    ......#
    ####.##
    .##.#..
    #..###.
    ....##.
    ###.#..
    #####..
    #####..
    ###.#..
    ....##.
    #..###.
    .##.#..
    ####.##
    ......#
    ....#.#
    ....###
    ....#.#

    .#.##.###.#..
    .#...#.#...##
    .##..#####...
    .##..#####...
    .#...#.#...##
    ##.##.###.#..
    .##.##..#.###
    ###..#.#...##
    .#.##....##..
    ##..##..###..
    ##..##.#.#.##
    ...#.#..#####
    .##.#.#.###..
    ..##..#.#.###
    ..#.##....#..
    #.#####.#..##
    .####..###...

    ..#.##.##########
    .##..#.#...#....#
    ..#.##...###....#
    ...#.#..#..##..##
    .#..#........##..
    .#..#........##..
    #..#.#..#..##..##
    ..#.##...###....#
    .##..#.#...#....#
    ..#.##.##########
    #.#.####..#.####.
    .##.###..##......
    ###.#..###.######

    .##..#.#..#.#.#
    .##..#.#..#.#.#
    #.#.#.##..#.#..
    #..#....##.##..
    #.....##.#.#.#.
    #..#.....#.###.
    ..##.##..#####.
    ###..#..#.###.#
    ..##...#.......
    .#...###.#.##.#
    .##..###.#.##.#
    ..##...#.......
    ###..#..#.###.#
    ..##.##..#####.
    #..#.....#.###.

    .########
    ....####.
    ####...##
    ####....#
    #..#.##.#
    ##.##..##
    ##.##..##

    #........##
    .##.##.##..
    ...####....
    ##.####.###
    ###.##.####
    #..#..#..##
    .#......#..
    ..#.##.#...
    .##.##.##..
    .#####.##..
    ..######...
    .#.#..#.#..
    .##....##..
    .##.##.##..
    ..#....#...

    #########.#######
    .#.##....##.#..#.
    ##.##.##.##.####.
    .##.##..##.##..##
    .#.########.#..#.
    ....##..##.......
    ..#........#....#
    #.#.#.##.#.#.##.#
    .###.####.###..##
    ##...#..#...####.
    .#....##....#..#.
    .#.#.####.#.#..#.
    #..########..##..
    ####.#..#.#######
    ####.#..#.#######
    ...#.#..#.#......
    ..###.##.###....#

    .#.####.....#####
    .###.##.#.#...###
    #.#.#######.#####
    #..#...###..#....
    #.#.##.#.#.####..
    .#.#..#.#..#..#..
    ##.#..#.#..#..#..

    .........##.#.#
    ..#######....##
    .###...####..#.
    ....#.#.#.##...
    .###.#.#....#.#
    #.##...##...##.
    .##...#.#.....#
    .##...#.#.....#
    #.##...##...##.
    .###.#.#....#.#
    ....#.#.#.##...
    .###...####....
    ..#######....##
    .........##.#.#
    .........##.#.#

    ....##...
    ......###
    #..##..##
    .##.#.#..
    #..##....
    .##.#...#
    #######.#
    #..#.##.#
    #..####.#

    ##.####.#######
    ...####...#.##.
    #.#.##.#.###..#
    ..######..#####
    ....##....#....
    ....##......##.
    .#..##..#.###.#
    #...##...#.....
    ##..##..#######
    .##.##.##..#..#
    #..####..#.....
    ...#..#....#..#
    #.##..##.#.####

    ##.#.##
    ...####
    ####...
    ..#..##
    ...##..
    ###.#.#
    .....##
    ##.####
    ..#....

    .###.##.#...#..
    .#.....#..###.#
    .#.....#..###.#
    .###..#.#...#..
    .###.####..##..
    .###.#....#.##.
    #.#..##.......#
    ##..#.##.#...#.
    ...#..#....#...
    ##...##...#.##.
    ##...##...#.##.
    ...#..#....#...
    ##..#.##.#...#.
    #.#..##.......#
    .###.#....#.##.

    #...#....##..
    ......###..##
    .##..#...##..
    ####.##......
    ..##.##......
    ##.....######
    ..#.#..######
    .#.#.#.######
    .#..###.####.
    #............
    .####....##..
    .##.#####..##
    .##.###..##..
    ###..#.######
    #...#.#######
    ..#.#........
    ##...##......

    ##.#.....
    ..#..#.#.
    ....#.#.#
    ....#..#.
    ....#..#.
    ....#.#.#
    ..#..#.#.
    ##.#.....
    .####....
    #######..
    ###.###..
    .####....
    ##.#.....

    #.###.###
    .##.#..#.
    #.#.####.
    .#.######
    #...#..#.
    #.##....#
    .#...##..
    #.#.####.
    ###.#..#.
    ...#....#
    #.#######
    #.#######
    ...#....#
    ###.#..#.
    #.#.####.
    .#...##..
    #.##....#

    ....##.
    #..#..#
    .##....
    ####..#
    #..####
    ....##.
    #......

    #..##..#.
    .##..##..
    #..##..##
    ........#
    .##..##..
    ########.
    ........#
    ###..####
    #..##..#.
    #..##..##
    .##..##.#
    .##..##..
    #..##..#.

    #...#.#..#.#.
    ####.......##
    ..###.#..#.##
    .######..####
    #######..####
    ....###..###.
    #.##...##...#
    .###...##...#
    .##.##....##.
    ......#..#...
    #.#..........
    #.#.##.##.##.
    #.#.##.##.##.
    #.#..........
    ......#..#...
    .##.##....##.
    .###...##...#

    .##....#....#
    #####.##....#
    .#.....#....#
    ##..#####..##
    ...###.##..##
    #.#.####....#
    ###..........
    ####.#..####.
    ##.##.#......
    ...##########
    ......###..##
    ###.#.###..##
    #.###...#..#.
    #####...#..#.
    ###.#.###..##

    ####.#.#..#.#
    #####..#..#..
    #..###..##..#
    ####.########
    .....########
    ####..######.
    .##..##....##
    .##.#........
    .##.#..####..
    .##....####..
    #..#..#.##.#.
    ....##.####.#
    ######..##..#
    #####..#..#..
    ##.###.####.#
    #..##.######.
    ....#########

    ...#.....##
    ####..#.###
    #########..
    ...##.....#
    ..#..#.....
    ......#.##.
    ##.#.......
    ###...##.##
    ....#####..
    ....#####..
    ###...##..#
    ##.#.......
    ......#.##.

    ##..###
    ..##...
    #.##.##
    ..##...
    #.##.##
    .#..#..
    #.##.##
    #.##.#.
    #....##
    ##..###
    .#..#..

    ....##.##.##.
    ..#.###..###.
    #.#.##....##.
    ##..#.####.##
    #...#.#..#.#.
    ###..#....#..
    #####.####.##
    ..#..######..
    #...########.
    #...########.
    ..#..######..
    #####.####.##
    ###..#....#..

    ##....##..#
    ###..######
    .#....#....
    ###..######
    #.####.####
    #......####
    .######....
    ###..######
    ..####..##.
    .######....
    ...#....##.
    ##.##.#####
    ..#..#.....

    ##..#.#####..##.#
    .#..###........##
    .#...#.###..#.#.#
    .#...#.###..#.#.#
    .#..###........##
    ##..#.##.##..##.#
    .#.#..##.##....#.
    ####.####.#.##..#
    .#####...###..#..
    .###...##.#####..
    #..##.#....####..
    #.#.#.###..#.#.##
    ##..#..####..#.##
    ..#..##..#####.#.
    ..#.#.#..#.###..#
    ..#.#.#..#.###..#
    ..#..##..#####.#.

    ..#...########.
    ##.#..###..###.
    ...##..#.##.#..
    .#...#..####..#
    ######...##...#
    ...#..#.####.#.
    ......##....##.

    ..#..#.
    ...####
    ...####
    ..#..#.
    ..#...#
    ####...
    #..#...
    ##....#
    #.#...#
    ####.##
    ..##.##
    .#.#..#
    ...#.#.
    #.####.
    #.#.##.

    .##...###
    .##...###
    #.##.##..
    ##.#..###
    #####....
    .#.......
    #.#.#....
    ##.##.###
    ..###..#.
    ##.##.#..
    ##..#.#..
    ..###..#.
    ##.##.###
    #.#.#....
    .#.......
    #####....
    ##.#..###

    .#..###.#.#.##..#
    ###.#.#.#.#.#....
    ....#..##.#..####
    #.....#...#.##..#
    #..##..###.##....
    ..#.#.##.###.....
    ##.#....#.#######
    ...###.#.#.######
    ####.##....#..##.
    ..####.....#.###.
    #####..###.#.####
    ...##....#.######
    #...##....#.#.##.
    ##.#...##.#.#####
    .##.##.#.###.....
    .########..##....
    .########..##....

    ....#.##...##
    ##.....#.#...
    ..##..##..#..
    ##.#.##....##
    ..##.....#.##
    .#..#.##.#...
    .#...#.######
    .#...#.######
    .#..#.##.#...
    ..##.....#.##
    ##.#.##....##
    ..##..##..#..
    ##....##.#...

    .#..#...#.#...#
    ..##..#..##.###
    .#..#.##.#.#...
    ..##..##.#.###.
    #....###.....##
    #....###.....##
    ..##..##.#.###.
    .#..#..#.#.#...
    ..##..#..##.###
    .#..#...#.#...#
    ##..##...####.#
    .#..#..###.##..
    #....##.#..##.#
    #.##.######....
    ..##..#..#.####

    .#.#.##...####...
    .#.#.###...######
    ####..#.#........
    ####..#.#.....#..
    .#.#.###...######
    .#.#.##...####...
    ######.#......##.
    ##.#...#.....#.#.
    #.#.#.#.#.#.#.#.#
    #..####.###...###
    ..#.###.#.##.#..#
    ...####.#.#.#..##
    ...####.#.#.#..##

    ....#.#.#.##..#
    ##...#..#..#.##
    ####.##..##..##
    #.###.#.##.#.#.
    ..#.##.#...####
    ..#.##.#...####
    #.###.#.##...#.
    #.#..#..###...#
    #.#..#..###...#
    #.###.#.##...#.
    ..#.##.#...####
    ..#.##.#...####
    #.###.#.##.#.#.

    ##....##...
    #..##..#.#.
    #..##..###.
    ##....##...
    .##..##..##
    .#.##.#.#.#
    ..#..#..##.
    ##....##...
    ..#..#.....

    ..###.#...##.####
    .##....#...#..##.
    .#####...########
    .#####...########
    .##....#...#..##.
    ..###.#...##.####
    #.#.##.#.##.##..#
    .#....##...##....
    ....##..#.#.##..#
    ..####.#.###.#..#
    .#####....##.....
    ..#..#...........
    #.####..........#

    #.#..#.##
    .#.##.#..
    ##....###
    .##..##..
    ...##....
    ...##....
    .##..##..
    ##....###
    .#.##.#..
    #.#..#.#.
    ##....##.
    ..####...
    .#....#.#

    ....##...##..
    .##.#..#.#.##
    #..##....###.
    #..##....###.
    .##.#..###.##
    ....##...##..
    #..#.##.#.##.
    .##.###..##.#
    #######.##...
    #####..####..
    #..###.....#.

    #.####.....
    .###...#..#
    ###...##..#
    #.##..#####
    #.##..#####
    ###...##..#
    .###...#..#
    #.####.....
    ..#..##.##.
    ...#.######
    .....#.####
    #.##.##.##.
    #####.##.##

    #######.##...####
    #######.##...####
    .#....##....###..
    .......#...#..#..
    .###...#.#######.
    #.#######.#####..
    .##.#.###...#..##
    ...#..####..##...
    ..#.##.#.##..#..#
    ..#.##.#.##..#..#
    ...#..##.#..##...
    .##.#.###...#..##
    #.#######.#####..
    .###...#.#######.
    .......#...#..#..
    .#....##....###..
    #######.##...####

    ##..#.#...#
    ...########
    ...#.##....
    ####.###..#
    ...#.#..##.
    ....##.....
    ...##...##.
    ##...#..##.
    ...##...##.
    ###.#..####
    ..###.##..#
    ....####..#
    ..##...####
    ..#.#.#....
    ##..#.##..#
    ..###.#####
    ####..#....

    ..###.##..#....##
    ...##.#.#..#...#.
    ##..##....###.#.#
    ##..##....###.#.#
    ...##.#.#..##..#.
    ..###.##..#....##
    ##....###..####..
    ###...####.....##
    #####..###...##..
    ..#..#.###...#...
    ....####.##..#.##

    ...#....##....#
    ...##.#....#.##
    #.#.##..##..#..
    .######.##.####
    .##.###....###.
    #..###.#..#.###
    #.###.######.##
    .##..###..###..
    .##..###..###..
    #.###.######.##
    #..###.#..#.###

    ###.###
    ##..#..
    ###.#..
    ###.#..
    ##...##
    ..##...
    ##.##..
    ###.#..
    ..#####
    ##.##.#
    ..#####
    ..#....
    ##..###

    #..#.#.#..#.#
    .##.#.##..##.
    #####..#..#..
    #..###.#..#.#
    ####..##..##.
    ......#.##.#.
    #..##...##...
    .##....####..
    #..####....##
    ..#..#......#
    #..#.#.####.#

    .......#.##
    ##..##.#..#
    ##..##.###.
    ..##..#....
    .#..#.#..##
    ......#.#..
    ........#..
    ########.##
    ......#..##
    ######..###
    ########..#
    ......##.#.
    ##########.

    .#.#.####.#.#..
    ##...####...##.
    ..#.######.#..#
    ####.#..#.#####
    ####......####.
    ##..#.##.#..###
    ##..##..##..###
    ....#....#....#
    ###.######.###.
    ..............#
    ##.########.##.

    .#..#..
    ...###.
    ...###.
    .#..#..
    .##....
    ##..###
    ...#.##
    ..#.#..
    ..#...#
    #.##..#
    #.#...#

    ...#...
    #..##..
    ...##..
    .#.##..
    .#.##..
    ...##..
    #..##..
    #..#...
    #.#####
    #...#..
    #.#.#..
    #.#....
    ....#..
    ....###
    ..###..
    .#..#..
    ..#..##

    ...#...###.....
    .#.##...#.##.##
    #.#.###....#.##
    ..#.##...#.##..
    #.####.###...##
    ...##.#.#.##...
    ####..##.#..###
    .##.#...#..####
    .#....###.##...
    #.#....##..####
    ##.###..#####..
    .#......##.#.##
    ##...###.......
    #..#..#.#.#..##
    #..#..#.#.#..##
    ##...###...#...
    .#......##.#.##

    .##..##
    ####.##
    .##.#..
    #####..
    #####.#
    .##.###
    #..####
    #..#...
    ####.##
    #..#.##
    ....#..

    ####.#..#..#####.
    #...#......#.#.##
    #...#....#.#.#.##
    ####.#..#..#####.
    ##..#...#...#....
    #..#...#.#...###.
    ....#...#####.#.#
    #...##..###...#.#
    .#.#.####.###.#..
    #.....##..#.##.##
    ##..#####..#.#.#.
    ##..#####..#.#.#.
    #.....##..#.##.##

    #....##..##..#.
    ..##...###.#...
    ..##...###.#...
    #....##..##..#.
    .#..#.#####.##.
    #.##.##...#.#.#
    #.##.##...###..
    #....#....#.#..
    #.........#...#

    #####..####..##
    #..##.#....#.##
    #..##.#####..##
    .##..##....##..
    ....#..#..#..#.
    #..#..######..#
    .##.#.##..##.#.
    ....#........#.
    #####........##

    ##....#####.##.
    .#.##.#.##..##.
    .######.....##.
    ........##.#..#
    ###..######.##.
    ..#..#...#.....
    ........##.####
    #......#.##....
    ##....##..#.##.
    .#.##.#..#..##.
    ..####....#####
    #..#...#..#####
    .##..##..#.#..#
    #......#.##.##.
    #..##..#..##..#

    ...####..#.#.####
    ..#..#.####.##..#
    .....###.###..##.
    .....#######..##.
    ..#..#.####.##..#
    ...####..#.#.####
    .#.###..##.#.#..#
    #.##.######..#..#
    .#..#.##..#.##..#
    .#.#....###.#.##.
    .#..###..#.##.##.
    ..##..###...#####
    ##...#...#.......
    #..#.###..#..####
    ##..#...#....####

    .##.#........##..
    #####.#.#....#.##
    #####.#.#....#.##
    .##.#.#......##..
    ...###.#####...#.
    ####.######.#.#.#
    ..#.#.#...#.#.###
    ##.#.###...#.#.#.
    ##.#.###...#.#.#.

    ..##.###.
    .##..##.#
    ###.#.#..
    ##..#.#.#
    #.#.##.##
    #.#..#.##
    ##..#.#.#
    ###.#.#..
    .##..##.#
    ..##.###.
    ..##.###.

    #.#.#..#.#.#....#
    #.########.#.##.#
    ####....####.##.#
    #....##....######
    ...######...####.
    #.##.##.##.###.##
    .#.######.#..##..
    #####..######..##
    ....####....####.

    ##.#..#.###
    ..##..##...
    ##.#..#.###
    ....##.....
    #.#....#.##
    .###..###..
    #.#....#.##
    #.##..##.##
    #.######.##
    .#......#..
    ###....####
    .###..###..
    #.#.##.#.##
    #.#....#.##
    .####.###..

    .#..#..###...##
    ..##.....#.#...
    .####.####.....
    .#..#.#.##.##..
    ######.###.####
    #.##.#..#.....#
    ######.#..##.#.
    ######.#..##.#.
    #.##.#..#.....#
    ######.###.####
    .#..#.#.##.##..
    .####.#.##.....
    ..##.....#.#...

    ##..##...####..
    .####..###..###
    #....##.##..##.
    #.##.##.#.##.#.
    ......#.######.
    #.##.###.#..#.#
    ..##..####..###
    #....#.#.#..#..
    ........#....#.
    ......###....##
    .......##.##.##
    #.##.#..#.##.#.
    ..##...##.##.##
    #.##.###......#
    .......########
    .####.##..##..#
    .####.#.##..##.

    #..####..#.###.
    ##......##.#..#
    ###.##.###...##
    #.#....#.#.##.#
    #.#....#.#.##.#
    ###.##.###...##
    ##......##.#..#
    #..####..#.###.
    ##..##..###..##
    ##########.#...
    .##....##.##...
    .#.#..#.#.##.#.
    #.#...##.##.#.#
    .##.##.##.##.##
    #############.#

    ##.#..#######.###
    #....##..#..#.#.#
    #...###..#..#.#.#
    ##.#..#######.###
    ##.#...#.##...###
    ##.#...#.##...###
    ##.#..#######.###
    #...###..#..#.#.#
    #....##..#..#.#.#
    ##.#..#######.###
    #..#......###...#
    .#..###..#.......
    ......#..##.##...
    .#.#...##.#..####
    ..#..##..#.#.###.

    .###..##.##
    .###..##.##
    ##...#....#
    .#.##.#..##
    #...#.##...
    ##.#...####
    ####.#.##..

    ..#...#..#...
    ##....####...
    ##..#.#..#.#.
    ##.####..####
    ###..##..##..
    ..##.#....#.#
    ##...........
    ....#.####.#.
    ..##.##..##.#
    ####..#..#..#
    .....######..
    ..##.#.##.#.#
    ..#.#..##....

    ..#..#...
    ###....##
    ##.##...#
    ##..#.#..
    ##.#...#.
    ##..#..#.
    ..#####.#
    ..##..##.
    ########.
    #######..
    ..##..##.
    ..#####.#
    ##..#..#.

    ####..###.##.#.
    ####..###.##...
    .##..####.####.
    #..##...##.###.
    .##..###.......
    #..#.##..#.#...
    #..#####.##.#.#
    .##....#..#.#.#
    .##.#####.##.#.
    .##..#...###..#
    #..##..#.#...#.
    #..#.##....#...
    #####...####..#

    #..##....##..####
    #....####....#..#
    #..#.####.#..####
    ###.##..##.###..#
    #.#.#.##.#.#.#..#
    ##..#.##.#..#####
    ...##.##.##...##.
    #..#..##.##..####
    #.#.#.##.#.#.#..#
    .##.#....#.##.##.
    ...#.#..#.#...##.
    ..##..##..##..##.
    ..##......##.....

    .....#..##..#
    ##...########
    .#.#....##...
    #.#.#........
    .#...########
    ...##########
    ######..##..#

    .#..#..#.
    .#..#..#.
    ##..#####
    #.##.##..
    .#..#.###
    ##...#.#.
    #....#.##

    ...#.##.#
    ..######.
    ##...#..#
    ##...##.#
    ..######.
    ...#.##.#
    ###.#..#.
    ###..#...
    ###.#.##.
    ...###.##
    ..##.#..#

    #.#########
    #..........
    ####.####.#
    ###.##..##.
    .###.#..#.#
    ##...#####.
    ....#....#.
    .#.#..##..#
    .#.#..##..#

    #########.#..
    ##.##.###.#..
    ##....##...##
    ###..####....
    .#.##.#.###.#
    ##.##.####.##
    .#.##.#.#..##
    .##..##.#.#..
    #.#..#.#..###
    #.#..#.######
    ..####..#..##
    ##.##.####...
    ##....#######
    ###..#####...
    .#.##.#.#.###
    .#.##.#.##.##
    ##....##.....

    #####.#...#
    .##...####.
    .###...##.#
    .....#.....
    .....#..#..
    ##..#..#..#
    ..###..##..
    #####.####.
    ##...#..##.
    ..#.#.....#
    ..#.#.....#
    ##...#..##.
    #####.####.
    ..###..##..
    ##..#..#..#
    .....#..#..
    .....#.....

    .##.....####..#
    .....#........#
    #..#.####..####
    ####...#.##.#..
    ####.#.######.#
    ....##...##...#
    ####.#.#.##.#.#
    ......#.#..#.#.
    #..####......##
    ####...######..
    #..####..##..##
    #..##.#.####.#.
    ......##.##.##.

    ##.########
    ##.########
    .#..##.##.#
    ##.#.######
    ....##.##.#
    #.###..##..
    ..##...##..
    ..#####..##
    #.#.#######
    ..##.#.##.#
    ....#......
    .#####....#
    #.#.#..##..
    .#.##.#..#.
    #.#....##..
    .#.####...#
    #..##......

    .#....#.#####.#.#
    #.#...##..###.###
    #.##.#..##..##..#
    .....#.###.#...##
    .##..#....###.#..
    .#..#...#..#.#.#.
    .#..#.#..#.##.###
    .#..#.#..#.##.###
    .#..#...#..#.#...
    .##..#....###.#..
    .....#.###.#...##
    #.##.#..##..##..#
    #.#...##..###.###
    .#....#.#####.#.#
    .#....#.#####.#.#

    ##..##...
    ###.##...
    #.###..#.
    #.###..#.
    ###.##...
    ##..##...
    #....#...
    #####..#.
    ##..#####
    #.##..#.#
    .###.#.#.
    ###.###.#
    ...###...
""".trimIndent()

val part2TestInput = """
""".trimIndent()

val test2Input = """
""".trimIndent()

fun part1() {
}

fun part2(values: List<Long>) {
}

fun List<String>.transpose(): List<String> {
    val transposedList = mutableListOf<StringBuilder>()

    val newRows = this[0].length - 1
    val newCols = this.size

    for (i in 0..newRows) {
        transposedList.add(StringBuilder(" ".repeat(newCols)))
    }
    for ((idx, line) in this.withIndex()) {
        for ((jdx, char) in line.withIndex()) {
            transposedList[jdx].setCharAt(idx, char)
        }
    }

    return transposedList.map { it.toString() }
}

fun main(args: Array<String>) {
    val sections = testInput.split("\n\n")

    val startTime = System.currentTimeMillis()

    for ((idx, section) in sections.withIndex()) {
        // Broken: this isn't just 4
        for ((jdx, window) in section.lines().windowed(4, 1, false).withIndex()) {
            if (window[0] == window[3] && window[1] == window[2]) {
                println("Found a reflection at section: $idx, rows=[${jdx + 1} -> ${1 + jdx + 3}]")
                println("${jdx + 1} ${window[0]}")
                println("${jdx + 2} ${window[1]}")
                println("${jdx + 3} ${window[2]}")
                println("${jdx + 4} ${window[3]}")
            }
        }
    }

    for ((idx, section) in sections.withIndex()) {
        for ((jdx, window) in section.lines().transpose()
            .windowed(4, 1, false).withIndex()) {
            if (window[0] == window[3] && window[1] == window[2]) {
                println("Found a reflection at section: $idx, column=[${jdx + 1} -> ${1 + jdx + 3}]")
                println("*** TRANSPOSED")
                println("${jdx + 1} ${window[0]}")
                println("${jdx + 2} ${window[1]}")
                println("${jdx + 3} ${window[2]}")
                println("${jdx + 4} ${window[3]}")
            }
        }
    }

    val endTime = System.currentTimeMillis()
    println("millis elapsed ${endTime - startTime}")
}
